CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nom VARCHAR(30) ,
    prenom VARCHAR(30) ,
    email VARCHAR(100) ,
    phone VARCHAR(20),
    pwd VARCHAR(255) ,
    role ENUM('acheteur','organisateur','admin') ,
    actif BOOLEAN DEFAULT 1
)







CREATE TABLE events (
    id INT AUTO_INCREMENT PRIMARY KEY,
    equipe1 VARCHAR(50) ,
    equipe2 VARCHAR(50) ,
    date_match DATE ,
    heure_match TIME ,
    lieu VARCHAR(50) ,
    duree INT ,
    nb_places INT ,
    statut ENUM('en_attente','valide','refuse') DEFAULT 'en_attente',
    organisateur_id INT NOT NULL,

    FOREIGN KEY (organisateur_id) REFERENCES users(id)
)





CREATE TABLE categories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    type VARCHAR(50) ,
    prix DECIMAL(10,2) ,
    match_id INT NOT NULL,

    FOREIGN KEY (match_id) REFERENCES events(id)
)




CREATE TABLE billets (
    id INT AUTO_INCREMENT PRIMARY KEY,
    acheteur_id INT NOT NULL,
    match_id INT NOT NULL,
    categorie_id INT NOT NULL,
    numero_place VARCHAR(10) ,
    prix DECIMAL(10,2) ,
    date_achat TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (acheteur_id) REFERENCES users(id),
    FOREIGN KEY (match_id) REFERENCES events(id),
    FOREIGN KEY (categorie_id) REFERENCES categories(id)
)



CREATE TABLE commentaires (
    id INT AUTO_INCREMENT PRIMARY KEY,
    acheteur_id INT NOT NULL,
    match_id INT NOT NULL,
    contenu TEXT ,
    note INT ,
    date_commentaire TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (acheteur_id) REFERENCES users(id),
    FOREIGN KEY (match_id) REFERENCES events(id)
);

